<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    

    <title>KVStore API &mdash; mxnet  documentation</title>
    
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">

    
    <link rel="stylesheet" href="../../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />

    <link rel="stylesheet" href="../../_static/mxnet.css" type="text/css">
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>

    <script type="text/javascript" src="../../_static/jquery-1.11.1.js"></script>
    
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    
    <script type="text/javascript" src="../../_static/searchtools_custom.js"></script>
    
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../_static/selectlang.js"></script>
    

    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript"> jQuery(function() { Search.loadIndex("/searchindex.js"); Search.init();}); </script>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new
      Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-96378503-1', 'auto');
      ga('send', 'pageview');

    </script>

    <!-- -->
    <!-- <script type="text/javascript" src="../../_static/jquery.js"></script> -->
    <!-- -->
    <!-- <script type="text/javascript" src="../../_static/underscore.js"></script> -->
    <!-- -->
    <!-- <script type="text/javascript" src="../../_static/doctools.js"></script> -->
    <!-- -->
    <!-- <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> -->
    <!-- -->
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 

    <link rel="icon" type="image/png" href="https://raw.githubusercontent.com/dmlc/web-data/master/mxnet/image/mxnet-icon.png">
  </head>
  <body role="document"><!-- Previous Navbar Layout
<div class="navbar navbar-default navbar-fixed-top">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a href="../../" class="navbar-brand">
        <img src="http://data.mxnet.io/theme/mxnet.png">
      </a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul id="navbar" class="navbar navbar-left">
        
        <li> <a href="../../get_started/index.html">Get Started</a> </li>
        
        <li> <a href="../../tutorials/index.html">Tutorials</a> </li>
        
        <li> <a href="../../how_to/index.html">How To</a> </li>
        
        
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="true">Packages <span class="caret"></span></a>
          <ul class="dropdown-menu">
            
            <li><a href="../../packages/python/index.html">
                Python
            </a></li>
            
            <li><a href="../../packages/r/index.html">
                R
            </a></li>
            
            <li><a href="../../packages/julia/index.html">
                Julia
            </a></li>
            
            <li><a href="../../packages/c++/index.html">
                C++
            </a></li>
            
            <li><a href="../../packages/scala/index.html">
                Scala
            </a></li>
            
            <li><a href="../../packages/perl/index.html">
                Perl
            </a></li>
            
          </ul>
        </li>
        
        <li> <a href="../../system/index.html">System</a> </li>
        <li> 
<form class="" role="search" action="../../search.html" method="get" autocomplete="off">
  <div class="form-group inner-addon left-addon">
    <i class="glyphicon glyphicon-search"></i>
    <input type="text" name="q" class="form-control" placeholder="Search">
  </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
  
</form> </li>
      </ul>
      <ul id="navbar" class="navbar navbar-right">
        <li> <a href="../../index.html"><span class="flag-icon flag-icon-us"></span></a> </li>
        <li> <a href="../..//zh/index.html"><span class="flag-icon flag-icon-cn"></span></a> </li>
      </ul>
    </div>
  </div>
</div>
Previous Navbar Layout End -->

<div class="navbar navbar-fixed-top">
  <div class="container" id="navContainer">
    <div id="header-inner" class="innder">
      <h1 id="logo-wrap">
        <a href="../../" id="logo"><img src="http://data.mxnet.io/theme/mxnet.png"></a>
      </h1>
      <nav id="main-nav" class='nav-bar'>
        <a class="main-nav-link" href="../../get_started/install.html">Install</a>
        
        <a class="main-nav-link" href="../../tutorials/index.html">Tutorials</a>
        
        <a class="main-nav-link" href="../../how_to/index.html">How To</a>
        

        <span id="dropdown-menu-position-anchor">
          <a href="#" class="main-nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="true">API<span class="caret"></span></a>
          <ul id="package-dropdown-menu" class="dropdown-menu">
            <li><a class="main-nav-link" href="../../api/python/index.html">Python</a></li>
            <li><a class="main-nav-link" href="../../api/scala/index.html">Scala</a></li>
            <li><a class="main-nav-link" href="../../api/r/index.html">R</a></li>
            <li><a class="main-nav-link" href="../../api/julia/index.html">Julia</a></li>
            <li><a class="main-nav-link" href="../../api/c++/index.html">C++</a></li>
            <li><a class="main-nav-link" href="../../api/perl/index.html">Perl</a></li>
          </ul>
        </span>

        <a class="main-nav-link" href="../../architecture/index.html">Architecture</a>
		<!-- <a class="main-nav-link" href="../../community/index.html">Community</a> -->
        <a class="main-nav-link" href="https://github.com/dmlc/mxnet">Github</a>
        <span id="dropdown-menu-position-anchor">
          <a href="#" class="main-nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="true">Versions<span class="caret"></span></a>
          <ul id="package-dropdown-menu" class="dropdown-menu">
            <li><a class="main-nav-link" href="http://mxnet.io/">master</a></li>
            
          </ul>
        </span>
      </nav>
      <script> function getRootPath(){ return "../../" } </script>
      <div class="burgerIcon dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button">â˜°</a>
          <ul id="burgerMenu" class="dropdown-menu">
              <li><a href="../../get_started/install.html">Install</a></li>
              
              <li><a href="../../tutorials/index.html">Tutorials</a></li>
              
              <li><a href="../../how_to/index.html">How To</a></li>
              
              <li class="dropdown-submenu">
                <a href="#" tabindex="-1">API</a>
                <ul class="dropdown-menu">
                  
                    <li><a tabindex="-1" href="../../api/python/index.html">Python</a>
                    </li>
                  
                    <li><a tabindex="-1" href="../../api/scala/index.html">Scala</a>
                    </li>
                  
                    <li><a tabindex="-1" href="../../api/r/index.html">R</a>
                    </li>
                  
                    <li><a tabindex="-1" href="../../api/julia/index.html">Julia</a>
                    </li>
                  
                    <li><a tabindex="-1" href="../../api/c++/index.html">C++</a>
                    </li>
                  
                    <li><a tabindex="-1" href="../../api/perl/index.html">Perl</a>
                    </li>
                  
                </ul>
              </li>
              <li><a href="../../architecture/index.html">Architecture</a></li>
		      <li><a class="main-nav-link" href="https://github.com/dmlc/mxnet">Github</a></li>
              <li class="dropdown-submenu">
                <a href="#" tabindex="-1">Versions</a>
                <ul class="dropdown-menu">
                  <li><a tabindex="-1" href="http://mxnet.io/">master</a></li>
                  
                </ul>
              </li>
          </ul>
      </div>
      <div class="plusIcon dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button"><span class="glyphicon glyphicon-plus" aria-hidden="true"></span></a>
        <ul id="plusMenu" class="dropdown-menu"></ul>
      </div>
      <div id="search-input-wrap">
          
<form class="" role="search" action="../../search.html" method="get" autocomplete="off">
  <div class="form-group inner-addon left-addon">
    <i class="glyphicon glyphicon-search"></i>
    <input type="text" name="q" class="form-control" placeholder="Search">
  </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
  
</form>
          <div id="search-preview"></div>
      </div>
      <div id='searchIcon'>
          <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
      </div>
      <div id="version">r0.10</div>
    </div>
  </div>
</div>

    
    <div class="container">
      <div class="row">
        <div class="sphinxsidebar leftsidebar" role="navigation" aria-label="main navigation">
          <div class="sphinxsidebarwrapper">
            
  <ul>
<li class="toctree-l1"><a class="reference internal" href="../python/index.html">Python Documents</a></li>
<li class="toctree-l1"><a class="reference internal" href="../r/index.html">R Documents</a></li>
<li class="toctree-l1"><a class="reference internal" href="../julia/index.html">Julia Documents</a></li>
<li class="toctree-l1"><a class="reference internal" href="../c++/index.html">C++ Documents</a></li>
<li class="toctree-l1"><a class="reference internal" href="../scala/index.html">Scala Documents</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html">Perl Documents</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../how_to/index.html">HowTo Documents</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../architecture/index.html">System Documents</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Tutorials</a></li>
</ul>

          </div>
        </div>
        <div class="content">
          
  <div class="section" id="kvstore-api">
<span id="kvstore-api"></span><h1>KVStore API<a class="headerlink" href="#kvstore-api" title="Permalink to this headline">Â¶</a></h1>
<p>Topics:</p>
<ul class="simple">
<li><a class="reference external" href="#basic-push-and-pull">Basic Push and Pull</a></li>
<li><a class="reference external" href="#list-key-value-pairs">List Key-Value Pairs</a></li>
</ul>
<div class="section" id="basic-push-and-pull">
<span id="basic-push-and-pull"></span><h2>Basic Push and Pull<a class="headerlink" href="#basic-push-and-pull" title="Permalink to this headline">Â¶</a></h2>
<p>Provides basic operation over multiple devices (GPUs) on a single device.</p>
<div class="section" id="initialization">
<span id="initialization"></span><h3>Initialization<a class="headerlink" href="#initialization" title="Permalink to this headline">Â¶</a></h3>
<p>Let&#8217;s consider a simple example. It initializes
a (int, NDArray) pair into the store, and then pulls the value out.</p>
<div class="highlight-perl"><div class="highlight"><pre><span></span><span class="n">pdl</span><span class="o">&gt;</span> <span class="nv">$kv</span> <span class="o">=</span> <span class="nn">mx</span><span class="o">-&gt;</span><span class="nn">kv</span><span class="o">-&gt;</span><span class="n">create</span><span class="p">(</span><span class="s">&#39;local&#39;</span><span class="p">)</span>
<span class="n">pdl</span><span class="o">&gt;</span> <span class="nv">$shape</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]</span>
<span class="n">pdl</span><span class="o">&gt;</span> <span class="nv">$kv</span><span class="o">-&gt;</span><span class="n">init</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="nn">mx</span><span class="o">-&gt;</span><span class="nn">nd</span><span class="o">-&gt;</span><span class="n">ones</span><span class="p">(</span><span class="nv">$shape</span><span class="p">)</span><span class="o">*</span><span class="mi">2</span><span class="p">)</span>
<span class="n">pdl</span><span class="o">&gt;</span> <span class="nv">$a</span> <span class="o">=</span> <span class="nn">mx</span><span class="o">-&gt;</span><span class="nn">nd</span><span class="o">-&gt;</span><span class="n">zeros</span><span class="p">(</span><span class="nv">$shape</span><span class="p">)</span>
<span class="n">pdl</span><span class="o">&gt;</span> <span class="nv">$kv</span><span class="o">-&gt;</span><span class="n">pull</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">out</span> <span class="o">=&gt;</span> <span class="nv">$a</span><span class="p">)</span>
<span class="n">pdl</span><span class="o">&gt;</span> <span class="k">print</span> <span class="nv">$a</span><span class="o">-&gt;</span><span class="n">aspdl</span>
<span class="p">[</span>
 <span class="p">[</span><span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span><span class="p">]</span>
 <span class="p">[</span><span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span><span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="push-aggregation-and-updater">
<span id="push-aggregation-and-updater"></span><h3>Push, Aggregation, and Updater<a class="headerlink" href="#push-aggregation-and-updater" title="Permalink to this headline">Â¶</a></h3>
<p>For any key that&#8217;s been initialized, you can push a new value with the same shape to the key, as follows:</p>
<div class="highlight-perl"><div class="highlight"><pre><span></span><span class="n">pdl</span><span class="o">&gt;</span> <span class="nv">$kv</span><span class="o">-&gt;</span><span class="nb">push</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="nn">mx</span><span class="o">-&gt;</span><span class="nn">nd</span><span class="o">-&gt;</span><span class="n">ones</span><span class="p">(</span><span class="nv">$shape</span><span class="p">)</span><span class="o">*</span><span class="mi">8</span><span class="p">)</span>
<span class="n">pdl</span><span class="o">&gt;</span> <span class="nv">$a</span> <span class="o">=</span> <span class="nn">mx</span><span class="o">-&gt;</span><span class="nn">nd</span><span class="o">-&gt;</span><span class="n">zeros</span><span class="p">(</span><span class="nv">$shape</span><span class="p">)</span>
<span class="n">pdl</span><span class="o">&gt;</span> <span class="nv">$kv</span><span class="o">-&gt;</span><span class="n">pull</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">out</span> <span class="o">=&gt;</span> <span class="nv">$a</span><span class="p">)</span>
<span class="n">pdl</span><span class="o">&gt;</span> <span class="k">print</span> <span class="nv">$a</span><span class="o">-&gt;</span><span class="n">aspdl</span>
<span class="p">[</span>
 <span class="p">[</span><span class="mi">8</span> <span class="mi">8</span> <span class="mi">8</span><span class="p">]</span>
 <span class="p">[</span><span class="mi">8</span> <span class="mi">8</span> <span class="mi">8</span><span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
<p>The data that you want to push can be stored on any device. Furthermore, you can push multiple
values into the same key, where KVStore first sums all of these
values, and then you pull the aggregated value, as follows:</p>
<div class="highlight-perl"><div class="highlight"><pre><span></span><span class="n">pdl</span><span class="o">&gt;</span> <span class="nv">$kv</span><span class="o">-&gt;</span><span class="nb">push</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="p">[</span><span class="nn">mx</span><span class="o">-&gt;</span><span class="nn">nd</span><span class="o">-&gt;</span><span class="n">ones</span><span class="p">(</span><span class="nv">$shape</span><span class="p">,</span> <span class="n">ctx</span><span class="o">=&gt;</span><span class="nn">mx</span><span class="o">-&gt;</span><span class="n">cpu</span><span class="p">(</span><span class="mi">0</span><span class="p">)),</span> <span class="nn">mx</span><span class="o">-&gt;</span><span class="nn">nd</span><span class="o">-&gt;</span><span class="n">ones</span><span class="p">(</span><span class="nv">$shape</span><span class="p">,</span> <span class="n">ctx</span><span class="o">=&gt;</span><span class="nn">mx</span><span class="o">-&gt;</span><span class="n">cpu</span><span class="p">(</span><span class="mi">1</span><span class="p">))])</span>
<span class="n">pdl</span><span class="o">&gt;</span> <span class="nv">$kv</span><span class="o">-&gt;</span><span class="n">pull</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">out</span> <span class="o">=&gt;</span> <span class="nv">$a</span><span class="p">)</span>
<span class="n">pdl</span><span class="o">&gt;</span> <span class="k">print</span> <span class="nv">$a</span><span class="o">-&gt;</span><span class="n">aspdl</span>
<span class="p">[</span>
 <span class="p">[</span><span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span><span class="p">]</span>
 <span class="p">[</span><span class="mi">2</span> <span class="mi">2</span> <span class="mi">2</span><span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
<p>For each push command, KVStore applies the pushed value to the value stored by an
<code class="docutils literal"><span class="pre">updater</span></code>. The default updater is <code class="docutils literal"><span class="pre">ASSIGN</span></code>. You can replace the default to
control how data is merged.</p>
<div class="highlight-perl"><div class="highlight"><pre><span></span><span class="n">pdl</span><span class="o">&gt;</span> <span class="nv">$updater</span> <span class="o">=</span> <span class="k">sub</span> <span class="p">{</span> <span class="k">my</span> <span class="p">(</span><span class="nv">$key</span><span class="p">,</span> <span class="nv">$input</span><span class="p">,</span> <span class="nv">$stored</span><span class="p">)</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span> <span class="k">print</span> <span class="s">&quot;update on key: $key\n&quot;</span><span class="p">;</span> <span class="nv">$stored</span> <span class="o">+=</span> <span class="nv">$input</span> <span class="o">*</span> <span class="mi">3</span><span class="p">;</span> <span class="p">}</span>
<span class="n">pdl</span><span class="o">&gt;</span> <span class="nv">$kv</span><span class="o">-&gt;</span><span class="n">_set_updater</span><span class="p">(</span><span class="nv">$updater</span><span class="p">)</span>
<span class="n">pdl</span><span class="o">&gt;</span> <span class="nv">$kv</span><span class="o">-&gt;</span><span class="nb">push</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="p">[</span><span class="nn">mx</span><span class="o">-&gt;</span><span class="nn">nd</span><span class="o">-&gt;</span><span class="n">ones</span><span class="p">(</span><span class="nv">$shape</span><span class="p">,</span> <span class="n">ctx</span><span class="o">=&gt;</span><span class="nn">mx</span><span class="o">-&gt;</span><span class="n">cpu</span><span class="p">(</span><span class="mi">0</span><span class="p">)),</span> <span class="nn">mx</span><span class="o">-&gt;</span><span class="nn">nd</span><span class="o">-&gt;</span><span class="n">ones</span><span class="p">(</span><span class="nv">$shape</span><span class="p">,</span> <span class="n">ctx</span><span class="o">=&gt;</span><span class="nn">mx</span><span class="o">-&gt;</span><span class="n">cpu</span><span class="p">(</span><span class="mi">1</span><span class="p">))])</span>
<span class="n">update</span> <span class="n">on</span> <span class="n">key:</span> <span class="mi">3</span>
<span class="n">pdl</span><span class="o">&gt;</span> <span class="nv">$kv</span><span class="o">-&gt;</span><span class="n">pull</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">out</span> <span class="o">=&gt;</span> <span class="nv">$a</span><span class="p">)</span>
<span class="n">pdl</span><span class="o">&gt;</span> <span class="k">print</span> <span class="nv">$a</span><span class="o">-&gt;</span><span class="n">aspdl</span>
<span class="p">[</span>
 <span class="p">[</span><span class="mi">8</span> <span class="mi">8</span> <span class="mi">8</span><span class="p">]</span>
 <span class="p">[</span><span class="mi">8</span> <span class="mi">8</span> <span class="mi">8</span><span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="pull">
<span id="pull"></span><h3>Pull<a class="headerlink" href="#pull" title="Permalink to this headline">Â¶</a></h3>
<p>You&#8217;ve already seen how to pull a single key-value pair. Similar to the way that you use the push command, you can
pull the value into several devices with a single call.</p>
<div class="highlight-perl"><div class="highlight"><pre><span></span><span class="n">pdl</span><span class="o">&gt;</span> <span class="nv">$b</span> <span class="o">=</span> <span class="p">[</span><span class="nn">mx</span><span class="o">-&gt;</span><span class="nn">nd</span><span class="o">-&gt;</span><span class="n">zeros</span><span class="p">(</span><span class="nv">$shape</span><span class="p">,</span> <span class="n">ctx</span><span class="o">=&gt;</span><span class="nn">mx</span><span class="o">-&gt;</span><span class="n">cpu</span><span class="p">(</span><span class="mi">0</span><span class="p">)),</span> <span class="nn">mx</span><span class="o">-&gt;</span><span class="nn">nd</span><span class="o">-&gt;</span><span class="n">zeros</span><span class="p">(</span><span class="nv">$shape</span><span class="p">,</span> <span class="n">ctx</span><span class="o">=&gt;</span><span class="nn">mx</span><span class="o">-&gt;</span><span class="n">cpu</span><span class="p">(</span><span class="mi">1</span><span class="p">))]</span>
<span class="n">pdl</span><span class="o">&gt;</span> <span class="nv">$kv</span><span class="o">-&gt;</span><span class="n">pull</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="n">out</span> <span class="o">=&gt;</span> <span class="nv">$b</span><span class="p">)</span>
<span class="n">pdl</span><span class="o">&gt;</span> <span class="k">print</span> <span class="nv">$b</span><span class="o">-&gt;</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">aspdl</span>
<span class="p">[</span>
 <span class="p">[</span><span class="mi">8</span> <span class="mi">8</span> <span class="mi">8</span><span class="p">]</span>
 <span class="p">[</span><span class="mi">8</span> <span class="mi">8</span> <span class="mi">8</span><span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="list-key-value-pairs">
<span id="list-key-value-pairs"></span><h2>List Key-Value Pairs<a class="headerlink" href="#list-key-value-pairs" title="Permalink to this headline">Â¶</a></h2>
<p>All of the operations that we&#8217;ve discussed so far are performed on a single key. KVStore also provides
the interface for generating a list of key-value pairs. For a single device, use the following:</p>
<div class="highlight-perl"><div class="highlight"><pre><span></span><span class="n">pdl</span><span class="o">&gt;</span> <span class="nv">$keys</span> <span class="o">=</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">9</span><span class="p">]</span>
<span class="n">pdl</span><span class="o">&gt;</span> <span class="nv">$kv</span><span class="o">-&gt;</span><span class="n">init</span><span class="p">(</span><span class="nv">$keys</span><span class="p">,</span> <span class="p">[</span><span class="nb">map</span> <span class="p">{</span> <span class="nn">mx</span><span class="o">-&gt;</span><span class="nn">nd</span><span class="o">-&gt;</span><span class="n">ones</span><span class="p">(</span><span class="nv">$shape</span><span class="p">)</span> <span class="p">}</span> <span class="mi">0</span><span class="o">..</span><span class="nv">@$keys</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
<span class="n">pdl</span><span class="o">&gt;</span> <span class="nv">$kv</span><span class="o">-&gt;</span><span class="nb">push</span><span class="p">(</span><span class="nv">$keys</span><span class="p">,</span> <span class="p">[</span><span class="nb">map</span> <span class="p">{</span> <span class="nn">mx</span><span class="o">-&gt;</span><span class="nn">nd</span><span class="o">-&gt;</span><span class="n">ones</span><span class="p">(</span><span class="nv">$shape</span><span class="p">)</span> <span class="p">}</span> <span class="mi">0</span><span class="o">..</span><span class="nv">@$keys</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
<span class="n">update</span> <span class="n">on</span> <span class="n">key:</span> <span class="mi">5</span>
<span class="n">update</span> <span class="n">on</span> <span class="n">key:</span> <span class="mi">7</span>
<span class="n">update</span> <span class="n">on</span> <span class="n">key:</span> <span class="mi">9</span>
<span class="n">pdl</span><span class="o">&gt;</span> <span class="nv">$b</span> <span class="o">=</span> <span class="p">[</span><span class="nb">map</span> <span class="p">{</span> <span class="nn">mx</span><span class="o">-&gt;</span><span class="nn">nd</span><span class="o">-&gt;</span><span class="n">ones</span><span class="p">(</span><span class="nv">$shape</span><span class="p">)</span> <span class="p">}</span> <span class="mi">0</span><span class="o">..</span><span class="nv">@$keys</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="n">pdl</span><span class="o">&gt;</span> <span class="nv">$kv</span><span class="o">-&gt;</span><span class="n">pull</span><span class="p">(</span><span class="nv">$keys</span><span class="p">,</span> <span class="n">out</span> <span class="o">=&gt;</span> <span class="nv">$b</span><span class="p">)</span>
<span class="n">pdl</span><span class="o">&gt;</span> <span class="k">print</span> <span class="nv">$b</span><span class="o">-&gt;</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">aspdl</span>
<span class="p">[</span>
 <span class="p">[</span><span class="mi">4</span> <span class="mi">4</span> <span class="mi">4</span><span class="p">]</span>
 <span class="p">[</span><span class="mi">4</span> <span class="mi">4</span> <span class="mi">4</span><span class="p">]</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
</div>

<div class="container">
<div class="footer">
  <p> Â© 2015-2017 DMLC. All rights reserved. </p>
</div>
</div>
        </div>
        
      <div class="sphinxsidebar rightsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">KVStore API</a><ul>
<li><a class="reference internal" href="#basic-push-and-pull">Basic Push and Pull</a><ul>
<li><a class="reference internal" href="#initialization">Initialization</a></li>
<li><a class="reference internal" href="#push-aggregation-and-updater">Push, Aggregation, and Updater</a></li>
<li><a class="reference internal" href="#pull">Pull</a></li>
</ul>
</li>
<li><a class="reference internal" href="#list-key-value-pairs">List Key-Value Pairs</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </div> <!-- pagename != index -->

    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
    <script type="text/javascript" src="../../_static/js/sidebar.js"></script>
    <script type="text/javascript" src="../../_static/js/search.js"></script>
    <script type="text/javascript" src="../../_static/js/navbar.js"></script>
    <script type="text/javascript" src="../../_static/js/clipboard.min.js"></script>
    <script type="text/javascript" src="../../_static/js/copycode.js"></script>
    <script type="text/javascript">
        $('body').ready(function () {
            $('body').css('visibility', 'visible');
        });
    </script>
  </body>
</html>